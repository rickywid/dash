(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(33)},22:function(e,t,a){},30:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(14),r=a.n(i),c=(a(22),a(8)),u=a(12),d=a.n(u),l=a(15),o=a(6),b=a(7),m=a(11),p=a(9),h=a(10),v=a(2),S=function(){function e(){Object(o.a)(this,e)}return Object(b.a)(e,[{key:"getSubreddit",value:function(e){return fetch("https://www.reddit.com/r/".concat(e,".json")).then(function(e){return e.json()}).then(function(e){return e.data.children})}},{key:"getData",value:function(e){var t=this,a=e.map(function(e){return t.getSubreddit(e)});return Promise.all(a).then(function(e){return e})}}]),e}(),f=a(16),g=a.n(f),k=a(5),O=a(3),E=a(4);k.b.add(E.c,E.e,E.g);var N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={updatedSubs:[]},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({updatedSubs:this.props.data2})}},{key:"displayLinks",value:function(e,t){var a=e.data.stickied?"stickied":"",n=e.data.gilded>0?s.a.createElement(O.a,{className:"icon-link icon--star",icon:"star"}):"",i="image"===e.data.link_flair_text||"Picture"===e.data.link_flair_text?s.a.createElement(O.a,{className:"icon-link icon--image",icon:"image"}):"",r=!0===e.data.is_video?s.a.createElement(O.a,{className:"icon-link icon--video",icon:"video"}):"";return s.a.createElement("li",{key:t,className:"subreddit-topic"},s.a.createElement("a",{className:"subreddit-topic__link ".concat(a),href:e.data.url,target:"_blank",rel:"noopener noreferrer"},e.data.title),s.a.createElement("small",null," by ",s.a.createElement("a",{href:"https://reddit.com/u/".concat(e.data.author)},e.data.author)," "),s.a.createElement("small",null,g()(1e3*e.data.created_utc).fromNow()),s.a.createElement("small",null," ",s.a.createElement("a",{href:"https://reddit.com".concat(e.data.permalink)},e.data.num_comments," comments")),n,i,r)}},{key:"render",value:function(){var e=this.props.data;return this.props.data?s.a.createElement("div",{className:"subreddit"},s.a.createElement("a",{className:"subreddit-title",href:"https://reddit.com/".concat(e[0].data.permalink)},s.a.createElement("h2",null,"r/",e[0].data.subreddit)),s.a.createElement("ul",{className:"subreddit-topics"},e.map(this.displayLinks))):s.a.createElement("div",null,"loading")}}]),t}(n.Component);k.b.add(E.b,E.d,E.a,E.f);var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.addInput=a.addInput.bind(Object(v.a)(Object(v.a)(a))),a.saveSubs=a.saveSubs.bind(Object(v.a)(Object(v.a)(a))),a.openSettings=a.openSettings.bind(Object(v.a)(Object(v.a)(a))),a.state={updatedSubs:[],isOpen:!1},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({updatedSubs:this.props.subreddits})}},{key:"openSettings",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(function(e){var n=Object(c.a)({},e);return n.updatedSubs[t]=a,n})}},{key:"addInput",value:function(){this.setState(function(e){var t=Object(c.a)({},e);return t.updatedSubs=t.updatedSubs.push(""),t})}},{key:"deleteInput",value:function(e){var t=this;this.setState(function(a){var n=Object(c.a)({},a);return n.updatedSubs=n.updatedSubs.splice(e,1),t.props.updateSubs(t.state.updatedSubs,"delete"),n})}},{key:"displayInput",value:function(e,t){return s.a.createElement("div",{className:"new-sub__wrap",key:t},s.a.createElement("label",{className:"new-sub__label"},"r/",s.a.createElement("input",{className:"new-sub__input",name:t,value:e,placeholder:"subreddit",onChange:this.handleChange})),s.a.createElement(O.a,{onClick:this.deleteInput.bind(this,t),className:"icon icon--remove",icon:"times"}))}},{key:"saveSubs",value:function(){this.setState({isOpen:!1}),this.props.updateSubs(this.state.updatedSubs,"add")}},{key:"render",value:function(){return this.state.isOpen?s.a.createElement("div",{className:"new-sub"},this.state.updatedSubs.map(this.displayInput.bind(this)),s.a.createElement("button",{className:"btn btn--add",onClick:this.addInput},s.a.createElement(O.a,{className:"icon icon--add",icon:"plus"})),s.a.createElement("button",{className:"btn btn--save",onClick:this.saveSubs},s.a.createElement(O.a,{className:"icon icon--save",icon:"check"})),s.a.createElement("button",{className:"btn btn--close",onClick:this.openSettings},"close")):s.a.createElement("button",{className:"settings-btn",onClick:this.openSettings},s.a.createElement(O.a,{className:"icon icon--cog",icon:"cog"}),"Settings")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{updatedSubs:e.subreddits}}}]),t}(n.Component);a(30);k.b.add(E.f);var y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleChange=e.handleChange.bind(Object(v.a)(Object(v.a)(e))),e.addSubReddit=e.addSubReddit.bind(Object(v.a)(Object(v.a)(e))),e.updateSubReddit=e.updateSubReddit.bind(Object(v.a)(Object(v.a)(e))),e.state={subreddits:[""],subredditsData:[],showInitialSetup:!0},e}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==JSON.parse(localStorage.getItem("subreddits"))&&this.setState({showInitialSetup:!1},function(){return e.getData()})}},{key:"getData",value:function(){var e=Object(l.a)(d.a.mark(function e(){var t,a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("subreddits")),a=new S,e.next=4,a.getData(t);case 4:n=e.sent,this.setState({subredditsData:n});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateSubReddit",value:function(e,t){var a=this;if("delete"===t&&0===e.length)return localStorage.removeItem("subreddits"),void this.setState({showInitialSetup:!0,subreddits:[""]});localStorage.setItem("subreddits",JSON.stringify(e)),this.setState({showInitialSetup:!1},function(){a.getData(JSON.parse(localStorage.getItem("subreddits")))})}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(function(e){var n=Object(c.a)({},e);return n.subreddits[t]=a,n})}},{key:"addSubReddit",value:function(){this.setState(function(e){var t=Object(c.a)({},e);return t.subreddits=t.subreddits.concat([""]),t})}},{key:"displaySubs",value:function(){var e=this;return JSON.parse(localStorage.getItem("subreddits")).map(function(t,a){return s.a.createElement(N,{key:a,id:a,data:e.state.subredditsData[a],data2:JSON.parse(localStorage.getItem("subreddits"))})})}},{key:"render",value:function(){var e=this;return this.state.showInitialSetup?s.a.createElement("div",{className:"start"},s.a.createElement("div",{className:"start__content"},s.a.createElement("h2",null,"Start adding some of your favourite subreddits"),this.state.subreddits.map(function(t,a){return s.a.createElement("div",{className:"start__newsub"},s.a.createElement("label",{className:"new-sub__label"},"r/",s.a.createElement("input",{name:a,className:"new-sub__input new-sub__input--start",onChange:e.handleChange,value:e.state.subreddits[a]})))}),s.a.createElement("div",{className:"button-wrap"},s.a.createElement("button",{className:"btn btn--add",onClick:this.addSubReddit},s.a.createElement(O.a,{className:"icon icon--add",icon:"plus"})),s.a.createElement("button",{className:"btn btn--save",onClick:function(){return e.updateSubReddit(e.state.subreddits,"add")}},s.a.createElement(O.a,{className:"icon icon--save",icon:"check"}))))):s.a.createElement("div",{className:"App"},s.a.createElement("nav",null,s.a.createElement(j,{subreddits:JSON.parse(localStorage.getItem("subreddits")),updateSubs:this.updateSubReddit})),s.a.createElement("div",{className:"subreddit-wrap"},this.displaySubs()))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.9e7aff48.chunk.js.map